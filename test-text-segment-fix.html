<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文本段翻译修复测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        .medType {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px 0;
            background-color: #f9f9f9;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #007bff;
            border-radius: 5px;
        }
        h2 {
            color: #007bff;
        }
        .instructions {
            background-color: #e7f3ff;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>文本段翻译修复测试页面</h1>
    
    <div class="instructions">
        <h3>测试说明：</h3>
        <ol>
            <li>确保浏览器扩展已加载</li>
            <li>将鼠标悬停在下面的测试元素上</li>
            <li>检查是否显示中文翻译tooltip</li>
            <li>打开开发者工具查看控制台日志</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>测试1: 混合节点结构（应该触发TextSegmentTranslator）</h2>
        <div class="medType">
            <!-- 国际化原值: HM001707=初诊 -->
            <input name="times" type="radio" id="times1" checked="checked" value="初诊" onclick="checkDtminType()" disabled="disabled">Initial Visit
            <!-- 国际化原值: HM002767=复诊 -->
            <input name="times" type="radio" id="times2" value="复诊" onclick="checkDtminType()" disabled="disabled">Follow-Up Visit
        </div>
    </div>

    <div class="test-section">
        <h2>测试2: 简单文本元素（应该使用普通翻译）</h2>
        <button>Initial Visit</button>
        <button>Follow-Up Visit</button>
    </div>

    <div class="test-section">
        <h2>测试3: 复杂混合结构</h2>
        <div class="medType">
            <span>Patient Type: </span>
            <input name="patient" type="radio" id="patient1" value="new">Initial Visit
            <input name="patient" type="radio" id="patient2" value="return">Follow-Up Visit
            <span> - Please select one</span>
        </div>
    </div>

    <script>
        // 模拟checkDtminType函数
        function checkDtminType() {
            console.log('checkDtminType called');
        }
        
        // 添加一些调试信息
        console.log('测试页面加载完成');
        console.log('页面元素数量:', document.querySelectorAll('*').length);
        console.log('medType元素数量:', document.querySelectorAll('.medType').length);
        
        // 检查TextSegmentTranslator是否可用
        if (typeof TextSegmentTranslator !== 'undefined') {
            console.log('TextSegmentTranslator可用');
        } else {
            console.log('TextSegmentTranslator不可用');
        }
    </script>
</body>
</html>
