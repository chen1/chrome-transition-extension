<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iframe测试页面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .iframe-container {
            margin: 20px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        iframe {
            width: 100%;
            height: 400px;
            border: none;
        }
        .info {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
        }
        .button-group {
            text-align: center;
            margin: 20px 0;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>iframe功能测试页面</h1>
        
        <div class="info">
            <h3>测试说明：</h3>
            <p>1. 将鼠标悬停在iframe上，会显示iframe的基本信息</p>
            <p>2. 将鼠标悬停在iframe内部的元素上，会显示单独的翻译提示（绿色边框）</p>
            <p>3. 内联iframe应该能正常工作，外部iframe可能遇到跨域限制</p>
            <p>4. 查看浏览器控制台可以看到详细的调试信息</p>
        </div>

        <div class="button-group">
            <button onclick="alert('这是一个普通按钮')">普通按钮</button>
            <button onclick="testIframe()">测试iframe内容</button>
        </div>

        <div class="iframe-container">
            <h3>测试iframe - 同域内容</h3>
            <iframe id="test-iframe" src="test_translate.html"></iframe>
        </div>

        <div class="iframe-container">
            <h3>测试iframe - 内联内容</h3>
            <iframe id="inline-iframe" srcdoc="
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset='UTF-8'>
                    <title>内联iframe测试</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
                        .button { background: #007bff; color: white; padding: 10px 20px; margin: 10px; border: none; border-radius: 4px; cursor: pointer; }
                        .button:hover { background: #0056b3; }
                        .text { margin: 10px 0; padding: 10px; background: white; border-radius: 4px; }
                    </style>
                </head>
                <body>
                    <h2>内联iframe内容</h2>
                    <div class='text'>这是一个测试文本</div>
                    <button class='button' onclick='alert(\"内联iframe按钮被点击\")'>点击我</button>
                    <div class='text'>另一个文本内容</div>
                    <button class='button'>另一个按钮</button>
                    <p>这是一个段落文本</p>
                    <span>这是一个span元素</span>
                </body>
                </html>
            "></iframe>
        </div>

        <div class="iframe-container">
            <h3>测试iframe - 外部内容</h3>
            <iframe id="external-iframe" src="https://www.example.com"></iframe>
        </div>

        <div class="iframe-container">
            <h3>测试iframe - 空白内容</h3>
            <iframe id="blank-iframe" src="about:blank"></iframe>
        </div>

        <div class="info">
            <h3>预期结果：</h3>
            <ul>
                <li><strong>同域iframe (test_translate.html)：</strong>能访问内容，内部元素悬浮时显示翻译提示（绿色边框）</li>
                <li><strong>内联iframe：</strong>能正常访问，内部元素悬浮时显示翻译提示（绿色边框）</li>
                <li><strong>外部iframe (example.com)：</strong>可能遇到跨域限制，只显示基本信息</li>
                <li><strong>空白iframe：</strong>显示基本信息</li>
            </ul>
            <p><strong>注意：</strong>iframe内部元素的tooltip会有绿色边框，以区别于普通元素的tooltip</p>
        </div>
    </div>

    <script>
        function testIframe() {
            const iframe = document.getElementById('test-iframe');
            try {
                const iframeDoc = iframe.contentDocument;
                if (iframeDoc) {
                    const buttons = iframeDoc.querySelectorAll('button');
                    alert(`iframe中找到 ${buttons.length} 个按钮`);
                } else {
                    alert('无法访问iframe内容');
                }
            } catch (error) {
                alert('访问iframe时出错: ' + error.message);
            }
        }

        // 页面加载完成后的调试信息
        window.addEventListener('load', function() {
            console.log('iframe测试页面加载完成');
            console.log('页面中的iframe数量:', document.querySelectorAll('iframe').length);
            
            // 检查每个iframe的状态
            document.querySelectorAll('iframe').forEach((iframe, index) => {
                console.log(`iframe ${index + 1}:`, {
                    id: iframe.id,
                    src: iframe.src,
                    width: iframe.width,
                    height: iframe.height
                });
            });
        });
    </script>
</body>
</html>
